{% extends "layouts/base.html" %}

{% block content %}
<div class="row">
    <!-- Left Column: Controls -->
    <div class="col-lg-4 mb-4">
        <!-- Batch Control Card -->
        <div class="card mb-4">
            <div class="card-header fw-bold"><i class="bi bi-stack"></i> Batch Control</div>
            <div class="card-body">
                <div class="mb-3">
                    <label for="batch-size-input" class="form-label">Batch Size</label>
                    <input type="number" class="form-control" id="batch-size-input" value="10" min="1">
                </div>
                <div class="d-grid gap-2">
                    <button class="btn btn-primary" id="start-batch-btn">Start Batch</button>
                    <button class="btn btn-danger" id="stop-batch-btn">Stop Process</button>
                </div>
                <hr>
                <div class="text-center">
                    <div>Mode: <span class="badge bg-secondary" id="system-mode">STOPPED</span></div>
                    <div class="mt-2 fs-5">Progress: <span id="batch-progress">0</span> / <span id="batch-target">0</span></div>
                </div>
            </div>
        </div>

        <!-- Box Counter Card -->
        <div class="card mb-4">
            <div class="card-body text-center">
                <h5 class="card-title">Total Box Count (All Time)</h5>
                <p class="display-4 fw-bold" id="total-box-count">0</p>
                <button class="btn btn-outline-danger btn-sm" id="reset-total-button">Reset Total</button>
            </div>
        </div>
    </div>

    <!-- Right Column: Visuals -->
    <div class="col-lg-8 mb-4">
        <!-- Event Capture -->
        <div class="card">
             <div class="card-header fw-bold"><i class="bi bi-camera-video-fill"></i> Last Event Capture (RPI)</div>
             <div class="card-body p-2">
                 <a id="event-capture-link" href="#" target="_blank">
                     <img id="event-capture-image" src="/static/images/placeholder.jpg" class="img-fluid rounded" alt="Last event capture">
                 </a>
             </div>
        </div>
    </div>
</div>
{% endblock %}

<!-- ADD THIS SCRIPT BLOCK -->
{% block scripts %}
<script src="/static/js/dashboard.js"></script>
{% endblock %}
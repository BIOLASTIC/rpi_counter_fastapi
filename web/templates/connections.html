{% extends "base.html" %}

{% block title %}Connections & Hardware{% endblock %}

{% block content %}
<div class="container-fluid">
    <h1 class="h3 mb-4 text-gray-800">Hardware Connections & Configuration</h1>
    <p class="mb-4">
        This page displays the current hardware configuration as loaded from the application's environment settings.
        These values are read-only and intended for reference and debugging. To change these, you must edit the <code>.env</code> file and restart the application.
    </p>

    <!-- Modbus RTU Communication Card -->
    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">Modbus RTU (RS485) Communication</h6>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6 mb-3">
                    <strong class="d-block text-gray-800">Serial Port:</strong>
                    <span>{{ config.MODBUS.PORT }}</span>
                </div>
                <div class="col-md-6 mb-3">
                    <strong class="d-block text-gray-800">Baud Rate:</strong>
                    <span>{{ config.MODBUS.BAUDRATE }}</span>
                </div>
                <div class="col-md-6 mb-3">
                    <strong class="d-block text-gray-800">Input Module Slave ID:</strong>
                    <span>{{ config.MODBUS.DEVICE_ADDRESS_INPUTS }}</span>
                </div>
                <div class="col-md-6 mb-3">
                    <strong class="d-block text-gray-800">Output Module Slave ID:</strong>
                    <span>{{ config.MODBUS.DEVICE_ADDRESS_OUTPUTS }}</span>
                </div>
                 <div class="col-md-6 mb-3">
                    <strong class="d-block text-gray-800">Polling Interval:</strong>
                    <span>{{ config.MODBUS.POLLING_MS }} ms</span>
                </div>
            </div>
        </div>
    </div>

    <!-- I/O Channel Mapping Card -->
    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">I/O Channel Mapping</h6>
        </div>
        <div class="card-body">
            <div class="row">
                <!-- Input Sensors -->
                <div class="col-lg-6">
                    <h5 class="text-gray-800">Input Sensors (USR-IO4040)</h5>
                    <p>Maps logical sensor names to the physical 1-based channel on the input module.</p>
                    <ul class="list-group">
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            Entry Sensor Channel
                            <span class="badge badge-primary badge-pill">Channel {{ config.SENSORS.ENTRY_CHANNEL }}</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            Exit Sensor Channel
                            <span class="badge badge-primary badge-pill">Channel {{ config.SENSORS.EXIT_CHANNEL }}</span>
                        </li>
                    </ul>
                </div>

                <!-- Output Relays & Coils -->
                <div class="col-lg-6">
                    <h5 class="text-gray-800">Output Coils (USR-IO8000)</h5>
                    <p>Maps logical device names to the 0-indexed relay address on the output module.</p>
                     <ul class="list-group">
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            Conveyor Relay
                            <span class="badge badge-primary badge-pill">Address {{ config.OUTPUTS.CONVEYOR }}</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            Buzzer
                            <span class="badge badge-primary badge-pill">Address {{ config.OUTPUTS.BUZZER }}</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            Green Status LED
                            <span class="badge badge-primary badge-pill">Address {{ config.OUTPUTS.LED_GREEN }}</span>
                        </li>
                         <li class="list-group-item d-flex justify-content-between align-items-center">
                            Red Status LED
                            <span class="badge badge-primary badge-pill">Address {{ config.OUTPUTS.LED_RED }}</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            Camera Light 1
                            <span class="badge badge-primary badge-pill">Address {{ config.OUTPUTS.CAMERA_LIGHT }}</span>
                        </li>
                         <li class="list-group-item d-flex justify-content-between align-items-center">
                            Camera Light 2
                            <span class="badge badge-primary badge-pill">Address {{ config.OUTPUTS.CAMERA_LIGHT_TWO }}</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}